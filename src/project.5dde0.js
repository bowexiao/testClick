window.__require=function t(e,i,a){function o(l,n){if(!i[l]){if(!e[l]){var s=l.split("/");if(s=s[s.length-1],!e[s]){var c="function"==typeof __require&&__require;if(!n&&c)return c(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+l+"'")}}var p=i[l]={exports:{}};e[l][0].call(p.exports,function(t){return o(e[l][1][t]||t)},p,p.exports,t,e,i,a)}return i[l].exports}for(var r="function"==typeof __require&&__require,l=0;l<a.length;l++)o(a[l]);return o}({GameData:[function(t,e,i){"use strict";cc._RF.push(e,"ab8b05+tZpLhYG5ZpbtWKCF","GameData"),Object.defineProperty(i,"__esModule",{value:!0});var a=function(){return function(){this.COL_NUM=10,this.ROW_NUM=10,this.MAX_NUM=26,this.GAME_TIME=60,this.addtime=0,this.LV=1,this.initUser={uid:0,lv:1,lvs:{1:0},star:0,volume:1,maxscore:0}}}();i.GameData=a,cc._RF.pop()},{}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"db896AH5P9L5qT4ie5DWe8+","Game"),Object.defineProperty(i,"__esModule",{value:!0});var a=t("./Global"),o=t("./common/Utils"),r=t("./Gird"),l=cc._decorator,n=l.ccclass,s=l.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=null,e.gird=null,e.girdBg=null,e.LVLebel=null,e.graphicsBg=null,e.combo=0,e.num=0,e.score=0,e.gameTime=0,e.isGameVoer=!1,e.girds=[],e.titleWidth=0,e.titleHeight=0,e.gap=5,e.startX=0,e.startY=0,e.boardWidth=0,e.boardHeight=0,e.click=!0,e}return __extends(e,t),e.prototype.onLoad=function(){this.num=Math.min(Math.max(a.Global.gameData.LV/2,1),a.Global.gameData.MAX_NUM),this.gameTime=a.Global.gameData.GAME_TIME+a.Global.gameData.addtime,a.Global.gameData.addtime=0,this.LVLebel.string="LV."+a.Global.gameData.LV,this.titleWidth=(this.girdBg.width-a.Global.gameData.COL_NUM*this.gap)/a.Global.gameData.COL_NUM,this.titleHeight=(this.girdBg.height-a.Global.gameData.ROW_NUM*this.gap)/a.Global.gameData.ROW_NUM;for(var t=0;t<a.Global.gameData.COL_NUM;t++){this.girds[t]=[];for(var e=0;e<a.Global.gameData.ROW_NUM;e++)this.girds[t][e]=null}this.initBoard();var i=Math.floor(a.Global.gameData.COL_NUM*a.Global.gameData.ROW_NUM*.9),o=a.Global.gameData.COL_NUM*a.Global.gameData.ROW_NUM*.1+.25*a.Global.gameData.LV;this.addGirds(Math.floor(Math.min(o,i))),this.check()},e.prototype.check=function(){for(var t={},e=!1,i=0;i<a.Global.gameData.COL_NUM&&!e;i++)for(var o=0;o<a.Global.gameData.ROW_NUM;o++){var r=this.girds[i][o];if(null!=r){var l=t[r.type];if(null==l&&(l=0),l++,t[r.type]=l,l>=2){e=!0;break}}}if(e)for(i=0;i<a.Global.gameData.COL_NUM;i++)for(o=0;o<a.Global.gameData.ROW_NUM;o++){var n=cc.v2(i,o);if(this.cilcked(n,!0))return!0}else this.gamePass()},e.prototype.gamePass=function(){this.isGameVoer=!0,cc.log("Global.gameData.initUser.lv---------\x3e",a.Global.gameData),a.Global.gameData.LV++,cc.director.loadScene("Game")},e.prototype.cilcked=function(t,e){var i=[1,-1],r=this.girds[t.x][t.y],l={};null!=r&&(null==l[r.type]&&(l[r.type]=[]),(u=l[r.type]).push(r));for(var n in i)for(var s=t.x,c=t.y,p=i[n],h=0;h<a.Global.gameData.COL_NUM&&!(s<0||s>=a.Global.gameData.COL_NUM);h++){if(null!=(f=this.girds[s][c])){if(f==r){s+=p;continue}if(null!=r&&f.type!=r.type)break;null==l[f.type]&&(l[f.type]=[]);var u=l[f.type],d=!1;for(var g in u){if((m=u[g])!=r&&m==f){d=!0;break}}if(d)continue;l[f.type].push(f);break}s+=p}for(var n in!1,i)for(s=t.x,c=t.y,p=i[n],h=0;h<a.Global.gameData.ROW_NUM&&!(c<0||c>=a.Global.gameData.ROW_NUM);h++){var f;if(null!=(f=this.girds[s][c])){if(f==r){c+=p;continue}if(null!=r&&f.type!=r.type)break;null==l[f.type]&&(l[f.type]=[]);u=l[f.type],d=!1;for(var g in u){var m;if((m=u[g])==f){d=!0;break}}if(d)continue;l[f.type].push(f);break}c+=p}var _=!1,v=0;for(var g in l){if((u=l[g]).length>=2){if(e)return!0;_=!0,this.click=!1;var y=function(e){var i=u[e];b.girds[i.x][i.y]=null;var a=cc.moveTo(.3,cc.v2(t.x*(b.titleWidth+b.gap),t.y*(b.titleHeight+b.gap))),r=cc.callFunc(function(){i.parent=null,o.Utils.putPoolType("Gird",i.node)});cc.log("gird----------\x3e",typeof i);var l=cc.sequence(a,r).easing(cc.easeCubicActionIn());i.node.runAction(l)},b=this;for(var G in u)y(G);v+=u.length}}if(e)return!1;v>0&&this.check(),_||null!=r||(this.addGirds(2),this.check())},e.prototype.addGirds=function(t){for(var e=[],i=0;i<a.Global.gameData.COL_NUM;i++)for(var r=0;r<a.Global.gameData.ROW_NUM;r++){null==this.girds[i][r]&&e.push({x:i,y:r})}for(var l=o.Utils.shuffule(e),n=0;n<t;n+=1){var s=l[n],c=Math.floor(Math.random()*this.num)+1;this.creatGirds(c,s.x,s.y)}},e.prototype.creatGirds=function(t,e,i){var a=o.Utils.getPoolType("Gird");null==a&&(a=cc.instantiate(this.gird));var l=a.getComponent(r.default);l.init(e,i,t),a.setPosition(e*(this.titleWidth+this.gap),i*(this.titleHeight+this.gap)),a.parent=this.girdBg,this.girds[e][i]=l,a.width=this.titleWidth,a.height=this.titleHeight},e.prototype.initBoard=function(){this.startX=-this.gap/2,this.startY=-this.gap/2,this.boardWidth=this.girdBg.width,this.boardHeight=this.girdBg.height,this.graphicsBg.clear();for(var t=0;t<a.Global.gameData.COL_NUM+1;t++)this.graphicsBg.moveTo(this.startX+t*(this.titleWidth+this.gap),this.startY),this.graphicsBg.lineTo(this.startX+t*(this.titleWidth+this.gap),this.startY+this.boardHeight),this.graphicsBg.stroke();for(var e=0;e<a.Global.gameData.ROW_NUM+1;e++)this.graphicsBg.moveTo(this.startX,this.startY+e*(this.titleHeight+this.gap)),this.graphicsBg.lineTo(this.startX+this.boardWidth,this.startY+e*(this.titleHeight+this.gap)),this.graphicsBg.stroke()},e.prototype.start=function(){this.init()},e.prototype.init=function(){var t=this;this.click=!0,this.girdBg.on(cc.Node.EventType.TOUCH_START,function(e){var i=t.girdBg.convertToNodeSpaceAR(e.getLocation()),a=cc.v2(Math.floor(i.x/(t.titleWidth+t.gap)),Math.floor(i.y/(t.titleHeight+t.gap)));t.cilcked(a,!1)})},e.prototype.gameOver=function(){},e.prototype.upDateTime=function(){this.time.string=Math.round(this.gameTime)+""},e.prototype.update=function(t){if(!this.isGameVoer){if(this.gameTime-=t,this.gameTime<=0)return this.gameOver(),void(this.isGameVoer=!0);this.upDateTime()}},__decorate([s({type:cc.Label,tooltip:"\u65f6\u95f4"})],e.prototype,"time",void 0),__decorate([s({type:cc.Prefab,tooltip:"\u683c\u5b50\u9884\u5236\u4f53"})],e.prototype,"gird",void 0),__decorate([s({type:cc.Node,tooltip:"\u80cc\u666f"})],e.prototype,"girdBg",void 0),__decorate([s({type:cc.Label,tooltip:"\u5173\u5361"})],e.prototype,"LVLebel",void 0),__decorate([s({type:cc.Graphics,tooltip:"\u753b\u5e03"})],e.prototype,"graphicsBg",void 0),e=__decorate([n],e)}(cc.Component);i.default=c,cc._RF.pop()},{"./Gird":"Gird","./Global":"Global","./common/Utils":"Utils"}],Gird:[function(t,e,i){"use strict";cc._RF.push(e,"28eb9UCT7BNy6U6/mz29Q4n","Gird"),Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,o=a.ccclass,r=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.spriteFrames=[],e.x=0,e.y=0,e.type=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.init=function(t,e,i){this.x=t,this.y=e,this.type=i,this.icon.spriteFrame=this.spriteFrames[i-1]},__decorate([r({type:cc.Sprite,tooltip:"\u7eb9\u7406"})],e.prototype,"icon",void 0),__decorate([r({type:cc.SpriteFrame,tooltip:"\u7eb9\u7406"})],e.prototype,"spriteFrames",void 0),e=__decorate([o],e)}(cc.Component);i.default=l,cc._RF.pop()},{}],Global:[function(t,e,i){"use strict";cc._RF.push(e,"075815ON4dMEY33PB6rtu6e","Global"),Object.defineProperty(i,"__esModule",{value:!0});var a=t("./GameData"),o=cc._decorator.ccclass,r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.gameData=new a.GameData,e=__decorate([o],e)}(cc.Component);i.Global=r,cc._RF.pop()},{"./GameData":"GameData"}],LevelItem:[function(t,e,i){"use strict";cc._RF.push(e,"4ddbaWusixFXI82+GG2ESPz","LevelItem"),Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,o=a.ccclass,r=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.init=function(t){this.label.string=t},__decorate([r(cc.Label)],e.prototype,"label",void 0),e=__decorate([o],e)}(cc.Component);i.default=l,cc._RF.pop()},{}],Level:[function(t,e,i){"use strict";cc._RF.push(e,"e9ec5IHfxVJDqXDZpIlXIWu","Level"),Object.defineProperty(i,"__esModule",{value:!0});var a=t("./LevelItem"),o=cc._decorator,r=o.ccclass,l=o.property,n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level_item=null,e.scrollView=null,e}return __extends(e,t),e.prototype.start=function(){this.initItem()},e.prototype.initItem=function(){var t=this;this.scrollView.content.removeAllChildren();for(var e=0;e<99;e++){var i=cc.instantiate(this.level_item);i.getComponent(a.default).init(e+1),i.parent=this.scrollView.content,i.on(cc.Node.EventType.TOUCH_START,function(){cc.log("--------1111-------"),t.startGame()})}},e.prototype.startGame=function(){cc.director.loadScene("Game")},__decorate([l({type:cc.Prefab,tooltip:"\u5173\u5361"})],e.prototype,"level_item",void 0),__decorate([l({type:cc.ScrollView,tooltip:"\u5bb9\u5668"})],e.prototype,"scrollView",void 0),e=__decorate([r],e)}(cc.Component);i.default=n,cc._RF.pop()},{"./LevelItem":"LevelItem"}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"21de19E+lVDga4eGF0b6PYr","Utils"),Object.defineProperty(i,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.shuffule=function(t){for(var e=t.length,i=0;i<e-1;i++){var a=Math.floor(Math.random()*(e-i)),o=t[a];t[a]=t[e-i-1],t[e-i-1]=o}return t},e.getPoolType=function(t){this.pools||(this.pools={});var e=this.pools[t];return e||(e=new cc.NodePool(t),this.pools[t]=e),e.get()},e.putPoolType=function(t,e){this.pools||(this.pools={});var i=this.pools[t];i||(this.getPoolType(t),i=this.pools(t)),i.put(e)},e.pools=null,e}(cc.Component);i.Utils=a,cc._RF.pop()},{}]},{},["Game","GameData","Gird","Global","Level","LevelItem","Utils"]);